CCN Face Management and Registration Protocol
=============================================
Revision 7/28/2009

== Source references
later.

== Face Management Protocol
The Face Management Protocol provides a method for an entity such as ccndc to control
the faces maintained by ccnd, which are subsequently used in the Registration Protocol.

The FMP supports "newface", "destroyface", and "queryface" operations.

A request operation is represented as a CCN Interest with
a CCN ContentObject encoding the majority of the request parameters embedded
as a component of the Interest name.
A response is represented as a ContentObject for which the name matches the Interest,
and the content encodes any necessary response data.

For the Face Management Protocol, the CCN ContentObject encoding the request and reply
is the FaceInstance.

To create a new face ccndc signs a content object NFBLOB containing null name
and a FaceInstance containing

  - Action "newface"
  - other fields necessary to set up a socket

ccndc then expresses an interest in /ccn/CCNDID/newface/NFBLOB

  - CCNDID is the pubid of the local ccnd
  - NFBLOB is the signed content object

The verb, "newface" occus in both the interest prefix, for dispatch,
and in the NFBLOB, so that it is signed.

ccnd creates the new face and answers with a FaceInstance containing
at least the PublisherPublicKeyDigest and FaceID.

== FaceInstance
See ccn.xsd/ccn.dtd

.......................................................
FaceInstance ::= Action?
	         PublisherPublicKeyDigest?
		 FaceID?
		 IPProto?
		 Host?
		 Port?
		 MulticastInterface?
		 MulticastTTL?
		 FreshnessSeconds?

Action		 ::= ("newface" | "destroyface" | "queryface")
PublisherPublicKeyDigest ::= SHA-256 digest
FaceID 		 ::= nonNegativeInteger
IPProto 	 ::= nonNegativeInteger [IANA protocol number; 6=TCP, 17=UDP]
Host 		 ::= textual representation of numeric IPv4 or IPv6 address
Port 		 ::= nonNegativeInteger [1..65535]
MulticastInterface ::= textual representation of numeric IPv4 or IPv6 address
MulticastTTL 	 ::= nonNegativeInteger [1..255]
FreshnessSeconds ::= nonNegativeInteger
.......................................................

=== Action
When FaceInstance is used as a request, the Action must be specified.
It will not be present in a response. !!TODO: describe: may return existing
FaceID when "create" with same parameters as existing face!!

=== PublisherPublicKeyDigest
Identifies the ccnd that the information is relevant for.
PublisherPublicKeyDigest is not necessary for self-registration, but
indicates the ccnd to which the request is directed, if present.
PublisherPublicKeyDigest is always present in a response.

=== FaceID
FaceID is not present in a "create" request, but must be specified in
a "destroy" or "query" request.
FaceID is always present in a response.

=== Host
Identifies the IPv4 or IPv6 numeric address of the remote ccnd for this
FaceInstance.

=== Port
Port identifies the port on the remote ccnd, or the port for the multicast group.

=== MulticastInterface
If the Host is a multicast address, and there are multiple
interfaces present, MulticastInterface will identify the unicast
numeric address of the interface to which the multicast address will be
attached.

=== MulticastTTL
Specifies the TTL to be used for multicast operations.  The default value is 1.

=== FreshnessSeconds
FreshnessSeconds is optional in a request, but is treated as a hint by ccnd.
In a response, FreshnessSeconds specifies the remaining lifetime of the
face.

